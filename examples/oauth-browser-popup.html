<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
  <title>Asana Oauth Example: Browser Popup</title>
  <script src="asana.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
<div id="ui"><a href="#" onclick="authorize();">Click to Authorize</a></div>

<script>
  //<![CDATA[

  /**
   * Usage:
   *
   * 1. Create an application in Asana.
   * 2. Set the redirect URI to be a "receiver page" served by your server.
   *    An example receiver page is `oauth-browser-popup-receiver.html`.
   * 3. Ensure this page and the `asana.js` file exist in the same directory
   *    on your web server (as well as the example receiver page, if using).
   * 4. Copy the app's client ID for use below:
   */
  var CLIENT_ID = 0;
  /*
   * 5. Copy the app's redirect URI for use below:
   */
  var REDIRECT_URI = '';

  var client = Asana.Client.create({
    clientId: CLIENT_ID,
    redirectUri: REDIRECT_URI
  });
  client.useOauth({
    flowType: Asana.auth.OauthFlowBrowserPopup
  });

  function authorize() {
    $('#ui').html('Authorizing...');
    client.authorize().then(function() {
      $('#ui').html('Fetching...');
      client.users.me().then(function(me) {
        $('#ui').text('Hello ' + me.name + '!');
      });
    });
  }

  //]]>
</script>

</body>
</html>
