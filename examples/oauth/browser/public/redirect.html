<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
  <title>Asana Oauth Example: Browser Redirect</title>
  <script src="asana.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
<div id="ui">Authorizing...</div>

<script>
  //<![CDATA[

  /**
   * Usage:
   *
   * 1. Create an application in Asana.
   * 2. Set the redirect URI to be this page, served by your server, e.g.:
   *    `http://localhost:8338/popup.html`.
   * 3. Ensure this page and the `asana.js` file exist in the same directory
   *    on your web server.
   * 4. Copy the app's client ID for use below:
   */
  var CLIENT_ID = YOUR_CLIENT_ID_HERE;

  var client = Asana.Client.create({
    clientId: CLIENT_ID,
    redirectUri: 'http://localhost:8338/redirect.html'
  });
  client.useOauth();
  client.authorize().then(function() {
    $('#ui').html('Fetching...');
    return client.users.me().then(function(me) {
      $('#ui').text('Hello ' + me.name);
    });
  }).catch(function(err) {
    $('#ui').html('Error: ' + err);
  });

  //]]>
</script>

</body> </html>
